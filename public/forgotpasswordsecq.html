<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="/resources/secure_app.css">
    <link rel="icon" type="image/svg+xml" href="/resources/Header_Lock_Image.svg">
    <meta charset="utf-8" />
    <title>Secure ED. - Security Question</title>
</head>
<body>
    <div id="wrapper">
        <header>
            <table class="header_table">
                <tbody>
                <tr>
                    <td class="lock"><img src="/resources/Header_Lock_Image.svg" style="width:9vh;" alt="Header_lock"></td>
                    <td class="title"><b>Secure ED.</b></td>
                    <td class="header_table_cell"></td>
                </tr>
                </tbody>
            </table>
        </header>
        <main>
            <h1>Security Question</h1>
            <div class="horizontal_line">
                <hr>
            </div>
            <div class="centered-form">
                <div id="sec-question" style="text-align:center" >Loading security question...</div>
                <form action="/forgotpasswordsecq" method="POST" style="text-align:center">
                    <label for="answer">Answer:</label>
                    <input type="text" id="answer" name="answer" required><br><br>
                    <input type="submit" value="Submit">
                </form>
                <div id="answer-fail" style="color: red;">
                    <script>
                        if (window.location.search.includes("answercheck=fail")) {
                            document.getElementById('answer-fail').textContent = 'The answer is invalid.';
                        }
                    </script>
                </div>
            </div>
        </main>
    </div>
    <script>
        // Fetch and display the security question
        fetch('/forgotpassword/security-question')
            .then(response => response.json())
            .then(data => {
                document.getElementById('sec-question').textContent = data.securityQuestion;
            })
            .catch(error => {
                console.error('Error fetching security question:', error);
                document.getElementById('sec-question').textContent = 'Failed to load security question';
            });
    </script>
</body>
</html>
